<canvas id="plotting_canvas"></canvas>

<!-- Calibration points -->
<div class="calibrationDiv">
  <input type="button" class="Calibration" id="Pt1"/>
  <input type="button" class="Calibration" id="Pt2"/>
  <input type="button" class="Calibration" id="Pt3"/>
  <input type="button" class="Calibration" id="Pt4">
  <input type="button" class="Calibration" id="Pt5">
  <input type="button" class="Calibration" id="Pt6">
  <input type="button" class="Calibration" id="Pt7">
  <input type="button" class="Calibration" id="Pt8">
  <input type="button" class="Calibration" id="Pt9">
</div>

<div id="loading" class="centerPage">
  <div class="col align-self-center">
    <img src="/assets/title.png" class="center">
    LOADING
    <img src="/assets/spinner.svg" class="center">
  </div>
</div>

<div id="mainScreen" class="centerPage">
  <div class="col align-self-center">
    <img src="assets/title.png" class="center">
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="Start()">SINGLEPLAYER</button>
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="Recalibrate()">RECALIBRATE</button>
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="HighScore()">HIGH SCORE</button>
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="Multiplayer()">MULTIPLAYER</button>
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="Help()">HELP</button>
    <button type="button" class="btn btn-secondary btn-lg btns" onclick="Authors()">AUTHORS</button>
  </div>
</div>




<div id="multiplayer" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Rooms:</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/refresh.svg"  class="transition" width="40" height="40" (click)="refreshRooms()"></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/plus.svg"  class="transition" width="40" height="40" onclick="CreateRoom()"></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="GoToMenu()"></div>
    </div>
    <div class="row" style="margin-top: 20px">
      <div class="col">
        <table mat-table [dataSource]="dataSource" class="table table-dark">

          <ng-container matColumnDef="room_name">
            <th mat-header-cell *matHeaderCellDef scope="col" style="text-align: center; vertical-align: middle;"> Name </th>
            <td mat-cell *matCellDef="let element" style="text-align: center; vertical-align: middle;"> {{element.room_name}} </td>
          </ng-container>

          <ng-container matColumnDef="players">
            <th mat-header-cell *matHeaderCellDef scope="col" style="text-align: center; vertical-align: middle;"> Players </th>
            <td mat-cell *matCellDef="let element" style="text-align: center; vertical-align: middle;"> {{element.players}} </td>
          </ng-container>

          <ng-container matColumnDef="password">
            <th mat-header-cell *matHeaderCellDef scope="col" style="text-align: center; vertical-align: middle;"> Password </th>
            <td mat-cell *matCellDef="let element" style="text-align: center; vertical-align: middle;">
              <div><div *ngIf="element.password; else elseBlock">Yes</div>
                <ng-template #elseBlock>No</ng-template></div>
            </td>
          </ng-container>

          <ng-container matColumnDef="isJoin">
            <th mat-header-cell *matHeaderCellDef scope="col" style="text-align: center; vertical-align: middle;"> Join </th>
            <td mat-cell *matCellDef="let element" style="text-align: center; vertical-align: middle;">
              <div *ngIf="element.isJoin; else elseBlock2"><a style="color: #005cbf" class="linkHover" (click)="joinRoom(element.room_id, element.room_name, element.password)">Join</a></div>
              <ng-template #elseBlock2></ng-template>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>

        <mat-paginator [pageSize]="10" showFirstLastButtons></mat-paginator>
      </div>
    </div>
  </div>
</div>

<div id="highscores" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Highscores:</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="GoToMenu()"></div>
    </div>
    <div class="row">
      <div class="col">
        <table class="table table-dark">
          <thead>
          <tr>
            <th scope="col">Rank</th>
            <th scope="col">Name</th>
            <th scope="col">Score</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let score of scores; let i = index">
            <th scope="row">{{i+1}}</th>
            <td>{{score.player_name}}</td>
            <td>{{score.score}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<div id="createRoom" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Create Room</h1></div>
<!--      <div class="col-sm" style="margin-top: 20px"></div>-->
<!--      <div class="col-sm" style="margin-top: 20px"></div>-->
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="Multiplayer()"></div>
    </div>

    <form [formGroup]="roomForm" (ngSubmit)="onCreateRoomSubmit(roomForm.value)">
      <div class="form-group">
        <label for="room_name">Room name</label>
        <input id="room_name" type="text" formControlName="room_name" class="form-control">
      </div>

      <div class="form-group">
        <label for="player_name">Player name</label>
        <input id="player_name" type="text" formControlName="player_name" class="form-control">
      </div>

      <div class="form-group">
        <label for="password">Password</label>
        <input id="password" type="password" formControlName="password" class="form-control">
      </div>

      <button class="btn btn-primary" type="submit" >Create</button>
    </form>
  </div>
</div>

<div id="room" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Room {{room.room_name}}</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/refresh.svg"  class="transition" width="40" height="40" (click)="refreshRoom()"></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" (click)="leaveRoom()"></div>
    </div>
    <div class="row">
      <div class="col">
        <table class="table table-dark">
          <thead>
          <tr>
            <th scope="col">#</th>
            <th scope="col" style="text-align: left">Player</th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <th scope="row">1</th>
            <td colspan="8" style="text-align: left">{{room.player1}}</td>
          </tr>
          <tr>
            <th scope="row">2</th>
            <td colspan="8" style="text-align: left">{{room.player2}}</td>
          </tr>
          <tr>
            <th scope="row">3</th>
            <td colspan="8" style="text-align: left">{{room.player3}}</td>
          </tr>
          <tr>
            <th scope="row">4</th>
            <td colspan="8" style="text-align: left">{{room.player4}}</td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row col">
      <button type="button" class="btn btn-secondary btn-lg" [disabled]="numberOfPlayers < 4">Start game</button>
    </div>
  </div>
</div>

<div id="joinRoom" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Join room {{room.room_name}}</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="Multiplayer()"></div>
    </div>
  </div>
  <div>
    <form [formGroup]="joinForm" (ngSubmit)="onJoinRoomSubmit(joinForm.value)">

      <div class="form-group">
        <label for="playerName">Player name</label>
        <input id="playerName" type="text" formControlName="playerName" class="form-control">
      </div>

      <div *ngIf="room.room_password;" class="form-group">
        <label for="roomPassword">Password</label>
        <input id="roomPassword" type="password" formControlName="roomPassword" class="form-control">
      </div>

      <button class="btn btn-primary" type="submit">Join</button>
    </form>
  </div>
</div>


<div id="authors" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Authors</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="GoToMenu()"></div>
    </div>
    <div class="row">
      <div class="col">

      </div>
    </div>
  </div>
</div>

<div id="help" class="centerPage">
  <div class="container">
    <div class="row" style="margin-bottom: 10px">
      <div class="col-sm-8" style="display: flex;align-items: center; margin-top: 10px"><h1>Help</h1></div>
      <div class="col-sm" style="margin-top: 20px"><img src="/assets/back.svg"  class="transition" width="40" height="40" onclick="GoToMenu()"></div>
    </div>
    <div class="row">
      <div class="col">

      </div>
    </div>
  </div>
</div>


<router-outlet></router-outlet>
